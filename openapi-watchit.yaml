openapi: 3.0.0
info:
  title: WatchIt API
  version: 1.0.0
  description: This is the WatchIt API
  contact:
    name: Maxime Biechy
    email: biechymaxime@gmail.com
servers:
  - url: http://localhost:3000
    description: Development server (uses docker-compose.dev.yml)
paths:
  /api-docs:
    get:
      summary: Get the OpenAPI documentation
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  openapi:
                    type: string
                    example: 3.0.0
                  info:
                    type: object
                    properties:
                      title:
                        type: string
                        example: WatchIt API
                      version:
                        type: string
                        example: 1.0.0
                      description:
                        type: string
                        example: This is the WatchIt API
                      contact:
                        type: object
                        properties:
                          name:
                            type: string
                            example: Maxime Biechy
                          email:
                            type: string
                            example: biechymaxime@gmail.com
  /debug-sentry:
    get:
      summary: Test Sentry error handling
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Sentry is working
  /api/v1:
    get:
      summary: Check if the API is working
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: API is working
  /api/v1/users:
    get:
      summary: Get all users
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    id:
                      type: string
                      example: 1
                    username:
                      type: string
                      example: Maxime
                    email:
                      type: string
                      example: biechymaxime@gmail.com
                    createdAt:
                      type: string
                      format: date-time
                      example: 2021-01-01T00:00:00.000Z
                    updatedAt:
                      type: string
                      format: date-time
                      example: 2021-01-01T00:00:00.000Z
    post:
      summary: Create a new user
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                username:
                  type: string
                  example: Maxime
                email:
                  type: string
                  example: biechymaxime@gmail.com
                password:
                  type: string
                  example: mypassword
      responses:
        '201':
          description: Created
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: string
                    example: 1
                  username:
                    type: string
                    example: Maxime
                  email:
                    type: string
                    example: biechymaxime@gmail.com
                  createdAt:
                    type: string
                    format: date-time
                    example: 2025-01-01T00:00:00.000Z
                  updatedAt:
                    type: string
                    format: date-time
                    example: 2025-01-01T00:00:00.000Z
        '400':
          description: Validation error
          content:
            application/json:
              schema:
                type: object
